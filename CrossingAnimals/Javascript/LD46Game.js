Bridge.assembly("LD46Game",function($asm,globals){"use strict";Bridge.define("LD46Game.Animal",{fields:{Position:null,Speed:0,GameObj:null,WaitTime:0,Widget:null,_moving:!1,_curTarget:null,_waitTimer:0,_roamTime:0,_roamTimer:0,_roamTarget:null,_prevPos:null,_audio:null},events:{OnTargetReached:null,OnWantsToMove:null},ctors:{init:function(){this.Position=new JuiceboxEngine.Math.Vector2;this._curTarget=new JuiceboxEngine.Math.Vector2;this._roamTarget=new JuiceboxEngine.Math.Vector2;this._prevPos=new JuiceboxEngine.Math.Vector2},ctor:function(obj){this.$initialize();this.GameObj=obj;this._audio=obj.GetComponent(JuiceboxEngine.Audio.AudioComponent);this.Speed=32;this.WaitTime=5;this._waitTimer=this.WaitTime;this._moving=!1;this._roamTime=1;this._roamTimer=0}},methods:{SetTarget:function(target){JuiceboxEngine.Math.Vector2.op_Equality(this._curTarget.$clone(),target.$clone())||this._moving||(this._curTarget=target.$clone(),this._moving=!0,JuiceboxEngine.Coroutines.CoroutineManager.StartCoroutine(this.MoveToTarget()))},Update:function(camera){this.Widget!=null&&(this.Widget.Anchor=camera.WorldToScreenPoint(this.GameObj.Transform.Position2D.$clone()));this._moving||this.Roam();this.GameObj.GetComponent(JuiceboxEngine.Sprite).Flip=this._prevPos.X<this.GameObj.Transform.Position2D.X?JuiceboxEngine.Sprite.SpriteFlip.HorizontalFlip:JuiceboxEngine.Sprite.SpriteFlip.None;this._prevPos=this.GameObj.Transform.Position2D.$clone()},MoveToTarget:function(){var $step=0,$jumpFromFinally,$returnValue,animalSprite,direction,$async_e,$enumerator=new Bridge.GeneratorEnumerator(Bridge.fn.bind(this,function(){try{for(;;)switch($step){case 0:return animalSprite=this.GameObj.GetComponent(JuiceboxEngine.Sprite),this._audio.Play(),$enumerator.current=new JuiceboxEngine.Coroutines.WaitForCoroutine.$ctor1(JuiceboxEngine.Coroutines.DefaultRoutines.Linear(1,function(x){animalSprite.Offset=new JuiceboxEngine.Math.Vector2.$ctor3(animalSprite.Offset.X,JuiceboxEngine.Math.JMath.Sin(x*JuiceboxEngine.Math.JMath.PI*4%JuiceboxEngine.Math.JMath.PI)*4)})),$step=1,!0;case 1:if(1){$step=2;continue}$step=4;continue;case 2:if(direction=JuiceboxEngine.Math.Vector2.op_Subtraction(this._curTarget.$clone(),this.GameObj.Transform.Position2D.$clone()),direction.Normalize(),this.GameObj.Transform.Translate2D(JuiceboxEngine.Math.Vector2.op_Multiply$1(JuiceboxEngine.Math.Vector2.op_Multiply$1(direction.$clone(),this.Speed),JuiceboxEngine.Util.Time.DeltaTime)),JuiceboxEngine.Math.Vector2.Distance(this.GameObj.Transform.Position2D.$clone(),this._curTarget.$clone())<8){Bridge.staticEquals(this.OnTargetReached,null)?null:this.OnTargetReached();this.Position=this._curTarget.$clone();this._moving=!1;$step=4;continue}return $enumerator.current=null,$step=3,!0;case 3:$step=1;continue;case 4:default:return!1}}catch($async_e1){$async_e=System.Exception.create($async_e1);throw $async_e;}}));return $enumerator},Roam:function(){this._waitTimer-=JuiceboxEngine.Util.Time.DeltaTime;this._waitTimer<=0&&(Bridge.staticEquals(this.OnWantsToMove,null)?null:this.OnWantsToMove(),this._waitTimer=JuiceboxEngine.Util.Random.NextRange$1(0,this.WaitTime));this._roamTimer-=JuiceboxEngine.Util.Time.DeltaTime;this._roamTimer<=0&&(this._roamTarget=JuiceboxEngine.Math.Vector2.op_Addition(this.Position.$clone(),new JuiceboxEngine.Math.Vector2.$ctor3(JuiceboxEngine.Util.Random.NextRange(-16,16),JuiceboxEngine.Util.Random.NextRange(-16,16))),this._roamTimer=JuiceboxEngine.Util.Random.NextRange$1(0,this._roamTime));var dir=JuiceboxEngine.Math.Vector2.op_Subtraction(this._roamTarget.$clone(),this.GameObj.Transform.Position2D.$clone());dir.Normalize();this.GameObj.Transform.Translate2D(JuiceboxEngine.Math.Vector2.op_Multiply$1(JuiceboxEngine.Math.Vector2.op_Multiply$1(dir.$clone(),JuiceboxEngine.Util.Time.DeltaTime),4))}}});Bridge.define("LD46Game.AnimalManager",{fields:{_animalSpots:null,_animals:null,MainMenu:!1},events:{OnGameOver:null},ctors:{init:function(){this.MainMenu=!1},ctor:function(animalSpots){this.$initialize();this._animalSpots=animalSpots;this._animals=new(System.Collections.Generic.List$1(LD46Game.Animal).ctor)}},methods:{AddAnimal:function(animal){this._animals.add(animal);var randomPos=this._animalSpots[JuiceboxEngine.Util.Random.NextRange(0,this._animalSpots.length)].$clone();animal.GameObj.Transform.Position2D=randomPos.$clone();animal.Position=randomPos.$clone();animal.addOnWantsToMove(Bridge.fn.bind(this,function(){this.MainMenu||animal.SetTarget(this._animalSpots[JuiceboxEngine.Util.Random.NextRange(0,this._animalSpots.length)].$clone())}))},Update:function(camera,cars){for(var animal,j,car,animalSprite,i=0;i<this._animals.Count;i=i+1|0)for(animal=this._animals.getItem(i),animal.Update(camera),j=0;j<cars.Count;j=j+1|0)if(car={v:cars.getItem(j)},car.v.CurSpeed>30){var animalPos={v:animal.GameObj.Transform.Position2D.$clone()},animalRect=new JuiceboxEngine.Math.RectangleF.$ctor2(animalPos.v.X-3,animalPos.v.Y,6,4),carRect=new JuiceboxEngine.Math.RectangleF.$ctor2(car.v.Center.X+(car.v.Direction.X<0?-16:0)+3,car.v.Center.Y,10,5);animalRect.Intersects(carRect.$clone())&&(animalSprite=animal.GameObj.GetComponent(JuiceboxEngine.Sprite),animalSprite.SourceRectangle=new JuiceboxEngine.Math.Rectangle.$ctor2(animalSprite.SourceRectangle.X,16,16,16),Bridge.staticEquals(this.OnGameOver,null)?null:this.OnGameOver(!1,JuiceboxEngine.Math.Vector2.op_Division$1(JuiceboxEngine.Math.Vector2.op_Addition(animalPos.v.$clone(),car.v.Center.$clone()),2)))}}}});Bridge.define("LD46Game.AnimalWidget",{inherits:[JuiceboxEngine.GUI.EmptyUIElement],fields:{_animal:null,_sprite:null},ctors:{ctor:function(animal,parent){this.$initialize();JuiceboxEngine.GUI.EmptyUIElement.ctor.call(this,parent);this._animal=animal;this._sprite=animal.GameObj.GetComponent(JuiceboxEngine.Sprite);var scale=JuiceboxEngine.Util.Browser.IsMobile()?2:4;this.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(16*scale,16*scale);this.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(.5,0);this.addOnMouseEnter(Bridge.fn.bind(this,function(uiEvent){JuiceboxEngine.Coroutines.CoroutineManager.StartCoroutine(JuiceboxEngine.Coroutines.DefaultRoutines.Linear(.25,Bridge.fn.bind(this,function(completion){this._sprite.Size=JuiceboxEngine.Math.Vector2.op_Addition(new JuiceboxEngine.Math.Vector2.$ctor3(1,1),JuiceboxEngine.Math.Vector2.op_Multiply$1(new JuiceboxEngine.Math.Vector2.$ctor3(.25,.25),JuiceboxEngine.Math.Easings.BackEaseOut(completion)))})))}));this.addOnMouseExit(Bridge.fn.bind(this,function(uiEvent){var size=JuiceboxEngine.Math.Vector2.op_Subtraction(this._sprite.Size.$clone(),new JuiceboxEngine.Math.Vector2.$ctor3(1,1));JuiceboxEngine.Coroutines.CoroutineManager.StartCoroutine(JuiceboxEngine.Coroutines.DefaultRoutines.Linear(.25,Bridge.fn.bind(this,function(completion){this._sprite.Size=JuiceboxEngine.Math.Vector2.op_Addition(new JuiceboxEngine.Math.Vector2.$ctor3(1,1),JuiceboxEngine.Math.Vector2.op_Multiply$1(size.$clone(),JuiceboxEngine.Math.Easings.BackEaseIn(1-completion)))})))}))}}});Bridge.define("LD46Game.Button",{inherits:[JuiceboxEngine.GUI.EmptyUIElement],fields:{_shadow:null,_front:null,_text:null,_frontColor:null,_tooltip:null,_height:0,_curHeight:0,_curRoutine:null},props:{Height:{get:function(){return this._height},set:function(value){this._height=value;this._curHeight=this._height;this.ForceUpdate()}}},ctors:{init:function(){this._frontColor=new JuiceboxEngine.Math.Color},ctor:function(parent,text){this.$initialize();JuiceboxEngine.GUI.EmptyUIElement.ctor.call(this,parent);this.InputType=JuiceboxEngine.GUI.UIInput.SELF;this._shadow=new JuiceboxEngine.GUI.SlicedImage(this);this._shadow.Color=new JuiceboxEngine.Math.Color.$ctor2(230,126,34,255);this._shadow.Position=new JuiceboxEngine.Math.Vector2.$ctor3(1,-1);this._shadow.Border=16;this._shadow.DisplayImage=this.ResourceManager.Load(JuiceboxEngine.Graphics.Texture2D,"Textures/UIBox.png");this._front=new JuiceboxEngine.GUI.SlicedImage(this._shadow);this._front.Position=new JuiceboxEngine.Math.Vector2.$ctor3(-2,2);this._front.Color=new JuiceboxEngine.Math.Color.$ctor2(241,196,15,255);this._front.Border=16;this._front.DisplayImage=this.ResourceManager.Load(JuiceboxEngine.Graphics.Texture2D,"Textures/UIBox.png");this._text=new JuiceboxEngine.GUI.Text(this._front);this._text.Font=this.ResourceManager.Load(JuiceboxEngine.Graphics.Font,"Fonts/RetroGaming.bff");this._text.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(this._text.Font.GetWidth(text),32);this._text.DisplayText=text;this._text.ShadowOffset=new JuiceboxEngine.Math.Point.$ctor1(2,-2);this._text.ShadowColor=JuiceboxEngine.Math.Color.Black.$clone();this._text.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(.5,.5);this._text.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(.5,.5);this.addOnMouseEnter(Bridge.fn.bind(this,function(x){this._curRoutine!=null&&JuiceboxEngine.Coroutines.CoroutineManager.StopCoroutine(this._curRoutine);this._curRoutine=JuiceboxEngine.Coroutines.CoroutineManager.StartCoroutine(JuiceboxEngine.Coroutines.DefaultRoutines.Linear(.3,Bridge.fn.bind(this,function(progress){this._curHeight=this._height-JuiceboxEngine.Math.Easings.ExponentialEaseOut(progress)*this._height;this.UpdateElement()}),!0))}));this.addOnMouseExit(Bridge.fn.bind(this,function(x){this._curRoutine!=null&&JuiceboxEngine.Coroutines.CoroutineManager.StopCoroutine(this._curRoutine);this._curRoutine=JuiceboxEngine.Coroutines.CoroutineManager.StartCoroutine(JuiceboxEngine.Coroutines.DefaultRoutines.Linear(.3,Bridge.fn.bind(this,function(progress){this._curHeight=JuiceboxEngine.Math.Easings.ExponentialEaseOut(progress)*this._height;this.UpdateElement()}),!0))}));this.addOnMouseDown(Bridge.fn.bind(this,function(x){JuiceboxEngine.Coroutines.CoroutineManager.StartCoroutine(this.Flash())}))}},methods:{AddToolTip:function(text){this.addOnMouseEnter(Bridge.fn.bind(this,function(x){if(this._tooltip==null){this._tooltip=new JuiceboxEngine.GUI.SlicedImage(this.RootElement);this._tooltip.InputType=JuiceboxEngine.GUI.UIInput.NONE;this._tooltip.Color=JuiceboxEngine.Math.Color.White.$clone();this._tooltip.Border=16;this._tooltip.DisplayImage=this.ResourceManager.Load(JuiceboxEngine.Graphics.Texture2D,"Textures/UI-Box.png");var ttText=new JuiceboxEngine.GUI.Text(this._tooltip);ttText.Font=this.ResourceManager.Load(JuiceboxEngine.Graphics.Font,"Fonts/RetroGaming.bff");ttText.ShadowOffset=new JuiceboxEngine.Math.Point.$ctor1(1,-1);ttText.ShadowColor=JuiceboxEngine.Math.Color.Black.$clone();ttText.DisplayText=text;ttText.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(.5,.5);ttText.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(.5,.5);ttText.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(ttText.Font.GetWidth(text),24);this._tooltip.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(ttText.Dimensions.X+10,32)}else this._tooltip.Enabled=!0}));this.addOnMouseStay(Bridge.fn.bind(this,function(x){this._tooltip.Position=JuiceboxEngine.Math.Vector2.op_Multiply(JuiceboxEngine.Input.InputManager.Instance.MousePosition.$clone(),new JuiceboxEngine.Math.Vector2.$ctor3(JuiceboxEngine.Graphics.GraphicsManager.Instance.Width,JuiceboxEngine.Graphics.GraphicsManager.Instance.Height))}));this.addOnMouseExit(Bridge.fn.bind(this,function(x){this._tooltip.Enabled=!1}))},Flash:function(){var $step=0,$jumpFromFinally,$returnValue,$async_e,$enumerator=new Bridge.GeneratorEnumerator(Bridge.fn.bind(this,function(){try{for(;;)switch($step){case 0:return this._frontColor=this._front.Color.$clone(),this._front.Color=JuiceboxEngine.Math.Color.White.$clone(),$enumerator.current=new JuiceboxEngine.Coroutines.WaitForSecondsRealTime(.1),$step=1,!0;case 1:this._front.Color=this._frontColor.$clone();default:return!1}}catch($async_e1){$async_e=System.Exception.create($async_e1);throw $async_e;}}));return $enumerator},ChangeColors:function(front,shadow,text){this._front.Color=front.$clone();this._shadow.Color=shadow.$clone();this._text.Color=text.$clone();this._frontColor=front.$clone()},SetImage:function(texture,dimensions){var img=new JuiceboxEngine.GUI.Image(this._front);img.DisplayImage=texture;img.Dimensions=dimensions.$clone();img.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(.5,.5);img.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(.5,.5);this._text.Enabled=!1},UpdateElement:function(){var offset=new JuiceboxEngine.Math.Vector2.$ctor3(JuiceboxEngine.Math.JMath.Round(this._curHeight),-JuiceboxEngine.Math.JMath.Round(this._curHeight));this._shadow.Dimensions=this.Dimensions.$clone();this._shadow.Position=offset.$clone();this._front.Dimensions=this.Dimensions.$clone();this._front.Position=JuiceboxEngine.Math.Vector2.op_Multiply$1(offset.$clone(),-2)}}});Bridge.define("LD46Game.Car",{fields:{CarInFront:null,CarBehind:null,MaxSpeed:0,CurSpeed:0,Direction:null,DespawnDistance:0,ShouldBeRemoved:!1,GameObj:null,CarSprite:null,_widget:null,Stopped:!1,_distance:0,Center:null},ctors:{init:function(){this.Direction=new JuiceboxEngine.Math.Vector2;this.Center=new JuiceboxEngine.Math.Vector2},ctor:function(obj,direction){this.$initialize();this.GameObj=obj;this._distance=0;this.CarInFront=null;this.CarBehind=null;this.Direction=direction.$clone();this.Stopped=!1;this.MaxSpeed=50;this.CurSpeed=this.MaxSpeed}},methods:{SetWidget:function(widget){this._widget=widget},Update:function(camera){this.CarSprite==null&&(this.CarSprite=this.GameObj.GetComponent(JuiceboxEngine.Sprite));this.GameObj.Transform.Translate2D(JuiceboxEngine.Math.Vector2.op_Multiply$1(JuiceboxEngine.Math.Vector2.op_Multiply$1(this.Direction.$clone(),this.CurSpeed),JuiceboxEngine.Util.Time.DeltaTime));this.Center=JuiceboxEngine.Math.Vector2.op_Addition(this.GameObj.Transform.Position2D.$clone(),JuiceboxEngine.Math.Vector2.op_Multiply$1(new JuiceboxEngine.Math.Vector2.$ctor3(8,0),-this.Direction.X));this._distance+=this.CurSpeed*JuiceboxEngine.Util.Time.DeltaTime;this._distance>this.DespawnDistance&&(this.ShouldBeRemoved=!0);this.CarInFront!=null&&this.CarInFront.Stopped&&!this.Stopped&&JuiceboxEngine.Math.Vector2.Distance(this.GameObj.Transform.Position2D.$clone(),this.CarInFront.GameObj.Transform.Position2D.$clone())<40&&JuiceboxEngine.Coroutines.CoroutineManager.StartCoroutine(this.StopCar());this._widget!=null&&(this._widget.Anchor=camera.WorldToScreenPoint(this.Center.$clone()))},StopCar:function(){var $step=0,$jumpFromFinally,$returnValue,$async_e,$enumerator=new Bridge.GeneratorEnumerator(Bridge.fn.bind(this,function(){try{for(;;)switch($step){case 0:if(!this.Stopped){$step=1;continue}$step=7;continue;case 1:return this.Stopped=!0,this.GameObj.GetComponent(JuiceboxEngine.Audio.AudioComponent).Play(),$enumerator.current=new JuiceboxEngine.Coroutines.WaitForCoroutine.ctor(JuiceboxEngine.Coroutines.CoroutineManager.StartCoroutine(JuiceboxEngine.Coroutines.DefaultRoutines.Linear(.5,Bridge.fn.bind(this,function(x){this.CurSpeed=JuiceboxEngine.Math.Easings.QuadraticEaseOut(1-x)*this.MaxSpeed;this.CarSprite.Rotation=JuiceboxEngine.Math.Easings.QuinticEaseOut(x)*-this.Direction.X})))),$step=2,!0;case 2:return $enumerator.current=new JuiceboxEngine.Coroutines.WaitForSeconds(.1),$step=3,!0;case 3:return $enumerator.current=new JuiceboxEngine.Coroutines.WaitForCoroutine.ctor(JuiceboxEngine.Coroutines.CoroutineManager.StartCoroutine(JuiceboxEngine.Coroutines.DefaultRoutines.Linear(.25,Bridge.fn.bind(this,function(x){this.CarSprite.Rotation=JuiceboxEngine.Math.Easings.QuinticEaseOut(1-x)*-this.Direction.X})))),$step=4,!0;case 4:return $enumerator.current=new JuiceboxEngine.Coroutines.WaitForSeconds(.5),$step=5,!0;case 5:return $enumerator.current=new JuiceboxEngine.Coroutines.WaitForCoroutine.ctor(JuiceboxEngine.Coroutines.CoroutineManager.StartCoroutine(JuiceboxEngine.Coroutines.DefaultRoutines.Linear(.2,Bridge.fn.bind(this,function(x){this.CurSpeed=JuiceboxEngine.Math.Easings.QuadraticEaseOut(x)*this.MaxSpeed})))),$step=6,!0;case 6:this.Stopped=!1;$step=7;continue;case 7:default:return!1}}catch($async_e1){$async_e=System.Exception.create($async_e1);throw $async_e;}}));return $enumerator}}});Bridge.define("LD46Game.CarWidget",{inherits:[JuiceboxEngine.GUI.EmptyUIElement],fields:{_car:null},ctors:{ctor:function(parent,car){var scale,selector;this.$initialize();JuiceboxEngine.GUI.EmptyUIElement.ctor.call(this,parent);this._car=car;this.InputType=JuiceboxEngine.GUI.UIInput.SELF;this.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(.5,.5);scale=JuiceboxEngine.Util.Browser.IsMobile()?2:4;this.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(24*scale,24*scale);this.Position=new JuiceboxEngine.Math.Vector2.$ctor3(0,16);selector=new JuiceboxEngine.GUI.Image(this);selector.DisplayImage=this.ResourceManager.Load(JuiceboxEngine.Graphics.Texture2D,"Textures/CarSelector.png");selector.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(24*scale,24*scale);selector.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(.5,.5);selector.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(.5,.5);selector.Enabled=!1;this.addOnMouseEnter(Bridge.fn.bind(this,function(uiEvent){selector.Enabled=!0;JuiceboxEngine.Coroutines.CoroutineManager.StartCoroutine(JuiceboxEngine.Coroutines.DefaultRoutines.Linear(.25,Bridge.fn.bind(this,function(completion){this._car.CarSprite.Size=JuiceboxEngine.Math.Vector2.op_Addition(new JuiceboxEngine.Math.Vector2.$ctor3(1,1),JuiceboxEngine.Math.Vector2.op_Multiply$1(new JuiceboxEngine.Math.Vector2.$ctor3(.25,.25),JuiceboxEngine.Math.Easings.BackEaseOut(completion)));selector.Dimensions=JuiceboxEngine.Math.Vector2.op_Addition(new JuiceboxEngine.Math.Vector2.$ctor3(24*scale,24*scale),JuiceboxEngine.Math.Vector2.op_Multiply$1(new JuiceboxEngine.Math.Vector2.$ctor3(50,50),JuiceboxEngine.Math.Easings.QuarticEaseIn(1-completion)))})));JuiceboxEngine.Util.Browser.IsMobile()&&JuiceboxEngine.Coroutines.CoroutineManager.StartCoroutine(this._car.StopCar())}));this.addOnMouseExit(Bridge.fn.bind(this,function(uiEvent){selector.Enabled=!1;var size=JuiceboxEngine.Math.Vector2.op_Subtraction(this._car.CarSprite.Size.$clone(),new JuiceboxEngine.Math.Vector2.$ctor3(1,1));JuiceboxEngine.Coroutines.CoroutineManager.StartCoroutine(JuiceboxEngine.Coroutines.DefaultRoutines.Linear(.25,Bridge.fn.bind(this,function(completion){this._car.CarSprite.Size=JuiceboxEngine.Math.Vector2.op_Addition(new JuiceboxEngine.Math.Vector2.$ctor3(1,1),JuiceboxEngine.Math.Vector2.op_Multiply$1(size.$clone(),JuiceboxEngine.Math.Easings.BackEaseIn(1-completion)))})))}));this.addOnMouseDown(Bridge.fn.bind(this,function(uiEvent){JuiceboxEngine.Coroutines.CoroutineManager.StartCoroutine(this._car.StopCar())}))}}});Bridge.define("LD46Game.EndScreen",{inherits:[JuiceboxEngine.GUI.EmptyUIElement],fields:{Menu:null,Retry:null},ctors:{ctor:function(win,image,seconds,level,parent){var img,title,curDate,date,stats,deathImage,stats1;this.$initialize();JuiceboxEngine.GUI.EmptyUIElement.ctor.call(this,parent);JuiceboxEngine.Coroutines.CoroutineManager.StartCoroutine(this.Show());this.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(.5,.5);this.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(.5,-.5);this.Position=new JuiceboxEngine.Math.Vector2.$ctor3(0,32);img=new JuiceboxEngine.GUI.Image(this);img.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(.5,.5);img.DisplayImage=win?this.ResourceManager.Load(JuiceboxEngine.Graphics.Texture2D,"Textures/ClipboardWin.png"):this.ResourceManager.Load(JuiceboxEngine.Graphics.Texture2D,"Textures/Clipboard.png");img.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(400,600);title=new JuiceboxEngine.GUI.Text(img);title.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(.5,1);title.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(.5,1);title.DisplayText="Accident Report";title.Position=new JuiceboxEngine.Math.Vector2.$ctor3(0,-64);title.Color=JuiceboxEngine.Math.Color.Black.$clone();title.Font=this.ResourceManager.Load(JuiceboxEngine.Graphics.Font,"Fonts/RetroGaming.bff");title.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(title.Font.GetWidth(title.DisplayText),32);curDate=System.DateTime.getNow();date=new JuiceboxEngine.GUI.Text(title);date.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(.5,1);date.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(.5,0);date.DisplayText=System.String.format("{0}/{1}/{2}",System.DateTime.getDay(curDate),System.DateTime.getMonth(curDate),System.DateTime.getYear(curDate));date.Font=this.ResourceManager.Load(JuiceboxEngine.Graphics.Font,"Fonts/RetroGaming.bff");date.Color=new JuiceboxEngine.Math.Color.$ctor2(128,128,128,255);date.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(date.Font.GetWidth(date.DisplayText),32);win?(stats1=new JuiceboxEngine.GUI.Text(date),stats1.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(.5,1),stats1.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(.5,0),stats1.Position=new JuiceboxEngine.Math.Vector2.$ctor3(0,-32),stats1.Font=this.ResourceManager.Load(JuiceboxEngine.Graphics.Font,"Fonts/RetroGaming.bff"),stats1.Color=new JuiceboxEngine.Math.Color.$ctor2(128,128,128,255),stats1.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(300,32),stats1.DisplayText=System.String.format("No accidents to\nreport!\n\nLevel: {0}\nResult: Complete!\n\nYou unlocked a new level!",[level])):(stats=new JuiceboxEngine.GUI.Text(date),stats.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(.5,1),stats.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(.5,0),stats.Position=new JuiceboxEngine.Math.Vector2.$ctor3(0,-32),stats.Font=this.ResourceManager.Load(JuiceboxEngine.Graphics.Font,"Fonts/RetroGaming.bff"),stats.Color=new JuiceboxEngine.Math.Color.$ctor2(128,128,128,255),stats.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(300,32),stats.DisplayText=System.String.format("Seconds left: {0}\nLevel: {1}\nResult: Crashed\n\nPhoto taken before accident:",seconds,level),deathImage=new JuiceboxEngine.GUI.Image(img),deathImage.DisplayImage=image,deathImage.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(1,0),deathImage.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(1,0),deathImage.Position=new JuiceboxEngine.Math.Vector2.$ctor3(-32,30),deathImage.Rotation=.1,deathImage.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(200,200));this.Menu=new LD46Game.Button(img,"Menu");this.Menu.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(140,50);this.Menu.Height=3;this.Menu.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(1,.5);this.Menu.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(.414285719,0);this.Menu.Position=new JuiceboxEngine.Math.Vector2.$ctor3(-5,0);this.Retry=new LD46Game.Button(img,win?"Next level!":"Retry!");this.Retry.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(200,50);this.Retry.Height=3;this.Retry.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(0,.5);this.Retry.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(.414285719,0);this.Retry.Position=new JuiceboxEngine.Math.Vector2.$ctor3(5,0)}},methods:{Show:function(){var $step=0,$jumpFromFinally,$returnValue,$async_e,$enumerator=new Bridge.GeneratorEnumerator(Bridge.fn.bind(this,function(){try{for(;;)switch($step){case 0:return $enumerator.current=new JuiceboxEngine.Coroutines.WaitForSecondsRealTime(.5),$step=1,!0;case 1:return $enumerator.current=new JuiceboxEngine.Coroutines.WaitForCoroutine.$ctor1(JuiceboxEngine.Coroutines.DefaultRoutines.Linear(1,Bridge.fn.bind(this,function(x){this.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(this.Anchor.X,-.5+JuiceboxEngine.Math.Easings.QuinticEaseOut(x))}),!0)),$step=2,!0;case 2:default:return!1}}catch($async_e1){$async_e=System.Exception.create($async_e1);throw $async_e;}}));return $enumerator}}});Bridge.define("LD46Game.Game",{inherits:[JuiceboxEngine.JuiceboxGame],main:function(){var game=new LD46Game.Game},statics:{fields:{TILE_SIZE:0},ctors:{init:function(){this.TILE_SIZE=16}}},ctors:{ctor:function(){this.$initialize();JuiceboxEngine.JuiceboxGame.ctor.call(this);this.Client&&this.Run(new LD46Game.MainScene(this.ResourceManager,0))}}});Bridge.define("LD46Game.Level",{fields:{CarSpawnPositions:null,CarDirections:null,AnimalRoamingSpots:null,DespawnDistance:0,CarSpawnOdds:0,CarSpawnRetry:0,_carRespawnTimer:0},events:{SpawnCarEvent:null},ctors:{ctor:function(mapID){this.$initialize();mapID===1?(this.CarSpawnPositions=System.Array.init([new JuiceboxEngine.Math.Vector2.$ctor3(0,88),new JuiceboxEngine.Math.Vector2.$ctor3(512,112)],JuiceboxEngine.Math.Vector2),this.CarDirections=System.Array.init([new JuiceboxEngine.Math.Vector2.$ctor3(1,0),new JuiceboxEngine.Math.Vector2.$ctor3(-1,0)],JuiceboxEngine.Math.Vector2),this.AnimalRoamingSpots=System.Array.init([new JuiceboxEngine.Math.Vector2.$ctor3(224,64),new JuiceboxEngine.Math.Vector2.$ctor3(288,64),new JuiceboxEngine.Math.Vector2.$ctor3(224,144),new JuiceboxEngine.Math.Vector2.$ctor3(288,144)],JuiceboxEngine.Math.Vector2)):mapID===2?(this.CarSpawnPositions=System.Array.init([new JuiceboxEngine.Math.Vector2.$ctor3(0,124),new JuiceboxEngine.Math.Vector2.$ctor3(0,104),new JuiceboxEngine.Math.Vector2.$ctor3(512,80),new JuiceboxEngine.Math.Vector2.$ctor3(512,60)],JuiceboxEngine.Math.Vector2),this.CarDirections=System.Array.init([new JuiceboxEngine.Math.Vector2.$ctor3(1,0),new JuiceboxEngine.Math.Vector2.$ctor3(1,0),new JuiceboxEngine.Math.Vector2.$ctor3(-1,0),new JuiceboxEngine.Math.Vector2.$ctor3(-1,0)],JuiceboxEngine.Math.Vector2),this.AnimalRoamingSpots=System.Array.init([new JuiceboxEngine.Math.Vector2.$ctor3(224,32),new JuiceboxEngine.Math.Vector2.$ctor3(288,32),new JuiceboxEngine.Math.Vector2.$ctor3(224,160),new JuiceboxEngine.Math.Vector2.$ctor3(288,160)],JuiceboxEngine.Math.Vector2)):mapID===3&&(this.CarSpawnPositions=System.Array.init([new JuiceboxEngine.Math.Vector2.$ctor3(0,140),new JuiceboxEngine.Math.Vector2.$ctor3(512,120),new JuiceboxEngine.Math.Vector2.$ctor3(0,60),new JuiceboxEngine.Math.Vector2.$ctor3(512,40)],JuiceboxEngine.Math.Vector2),this.CarDirections=System.Array.init([new JuiceboxEngine.Math.Vector2.$ctor3(1,0),new JuiceboxEngine.Math.Vector2.$ctor3(-1,0),new JuiceboxEngine.Math.Vector2.$ctor3(1,0),new JuiceboxEngine.Math.Vector2.$ctor3(-1,0)],JuiceboxEngine.Math.Vector2),this.AnimalRoamingSpots=System.Array.init([new JuiceboxEngine.Math.Vector2.$ctor3(224,16),new JuiceboxEngine.Math.Vector2.$ctor3(288,16),new JuiceboxEngine.Math.Vector2.$ctor3(224,96),new JuiceboxEngine.Math.Vector2.$ctor3(288,96),new JuiceboxEngine.Math.Vector2.$ctor3(224,176),new JuiceboxEngine.Math.Vector2.$ctor3(288,176)],JuiceboxEngine.Math.Vector2));this.DespawnDistance=512;this.CarSpawnOdds=.15;this.CarSpawnRetry=.5;this._carRespawnTimer=this.CarSpawnRetry}},methods:{Update:function(){this._carRespawnTimer-=JuiceboxEngine.Util.Time.DeltaTime;this._carRespawnTimer<=0&&(this.SpawnCars(),this._carRespawnTimer=this.CarSpawnRetry)},SpawnCars:function(){for(var $t,$t1,i=0;i<this.CarSpawnPositions.length;i=i+1|0)JuiceboxEngine.Util.Random.Next()<this.CarSpawnOdds&&(Bridge.staticEquals(this.SpawnCarEvent,null)?null:this.SpawnCarEvent(($t=this.CarSpawnPositions)[i].$clone(),($t1=this.CarDirections)[i].$clone()))}}});Bridge.define("LD46Game.MainScene",{inherits:[JuiceboxEngine.Scene],fields:{Level:0,MapId:0,Loop:0,_map:null,_level:null,_carCount:0,_cars:null,_newestCars:null,_animalManager:null,_timer:null,_secondsLeft:0,_gameOver:!1,_deathCam:null,_deathImage:null},ctors:{ctor:function(manager,level){this.$initialize();JuiceboxEngine.Scene.ctor.call(this,manager);this._cars=new(System.Collections.Generic.List$1(LD46Game.Car).ctor);this._newestCars=new(System.Collections.Generic.Dictionary$2(System.Int32,LD46Game.Car).ctor);this._carCount=0;this.Level=level;this.Level===0?JuiceboxEngine.Audio.AudioManager.GlobalVolume(0):JuiceboxEngine.Audio.AudioManager.GlobalVolume(.01)}},methods:{InitializeScene:function(){var background,high,bigButtonText,play,instructions,startOver,text,title,fullscreen,map,i,animalObj,animalSprite,animalAudio,animal,animalWidget,clip;for(this.DefaultCamera.ClearColor=new JuiceboxEngine.Math.Color.$ctor2(0,0,0,255),this.DefaultCamera.Zoom=JuiceboxEngine.Util.Browser.IsMobile()?2:4,this.DefaultCamera.Parent.Transform.Position2D=new JuiceboxEngine.Math.Vector2.$ctor3(256,104),this._secondsLeft=60,this.Level!==0?(this._timer=new LD46Game.Timer(this.GUI.Root),this._timer.DisplayTime(Bridge.Int.clip32(this._secondsLeft))):(JuiceboxEngine.SceneManager.FadeOutDuration=1,background=new JuiceboxEngine.GUI.SlicedImage(this.GUI.Root),background.DisplayImage=this.ResourceManager.Load(JuiceboxEngine.Graphics.Texture2D,"Textures/UIBox.png"),background.Border=15,background.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(300,400),background.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(.5,.5),background.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(.5,.5),background.Color=new JuiceboxEngine.Math.Color.$ctor2(0,0,0,200),high=0,bigButtonText="Play game",JuiceboxEngine.Util.LocalStorage.GetValue("high")!=null&&(Bridge.referenceEquals(Bridge.toString(JuiceboxEngine.Util.LocalStorage.GetValue("high")),"0")||(high=System.Int32.parse(Bridge.toString(JuiceboxEngine.Util.LocalStorage.GetValue("high"))),bigButtonText="Continue level "+(high+1|0))),play=new LD46Game.Button(background,bigButtonText),play.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(280,55),play.Position=new JuiceboxEngine.Math.Vector2.$ctor3(0,-8),play.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(.5,.5),play.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(.5,1),play.Height=4,play.addOnMouseDown(Bridge.fn.bind(this,function(uiEvent){high===0?JuiceboxEngine.SceneManager.SwitchToScene(new LD46Game.MainScene(this.ResourceManager,1),.1):JuiceboxEngine.SceneManager.SwitchToScene(new LD46Game.MainScene(this.ResourceManager,high+1|0),.1)})),instructions=new JuiceboxEngine.GUI.Text(background),instructions.Font=this.ResourceManager.Load(JuiceboxEngine.Graphics.Font,"Fonts/RetroGaming20.bff"),instructions.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(280,64),instructions.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(.5,1),instructions.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(.5,.5),instructions.ShadowOffset=new JuiceboxEngine.Math.Point.$ctor1(2,-2),instructions.Position=new JuiceboxEngine.Math.Vector2.$ctor3(0,-73),instructions.Enabled=high===0,instructions.DisplayText=JuiceboxEngine.Util.Browser.IsMobile()?"Tap the cars to stop them from hitting the animals!":"Click the cars to stop them from hitting the animals!",startOver=new LD46Game.Button(background,"Start over"),startOver.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(280,40),startOver.Position=new JuiceboxEngine.Math.Vector2.$ctor3(0,-73),startOver.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(.5,.5),startOver.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(.5,1),startOver.Height=4,startOver.addOnMouseDown(Bridge.fn.bind(this,function(uiEvent){JuiceboxEngine.SceneManager.SwitchToScene(new LD46Game.MainScene(this.ResourceManager,1),.1)})),startOver.Enabled=high!==0,text=new JuiceboxEngine.GUI.Text(background),text.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(280,32),text.DisplayText="This game is created in 48 hours by Thom Zeilstra for the Ludum Dare #46 competition! Have fun!",text.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(.5,0),text.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(.5,0),text.addOnMouseDown(function(uiEvent){JuiceboxEngine.Util.Browser.OpenWindow("https://ldjam.com")}),title=new JuiceboxEngine.GUI.Image(this.GUI.Root),title.DisplayImage=this.ResourceManager.Load(JuiceboxEngine.Graphics.Texture2D,"Textures/Title.png"),title.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(300,300),title.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(.5,0),title.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(.5,.5),fullscreen=new LD46Game.Button(this.GUI.Root,"Fullscreen"),fullscreen.Position=new JuiceboxEngine.Math.Vector2.$ctor3(0,4),fullscreen.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(.5,0),fullscreen.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(.5,0),fullscreen.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(200,32),fullscreen.Height=2,fullscreen.addOnMouseDown(function(uiEvent){JuiceboxEngine.Util.Browser.RequestFullscreen()})),this.Level!==0?(this.MapId=(this.Level-1|0)%3+1|0,this.Level>=2&&(this.MapId=this.MapId-1|0),this.Loop=Bridge.Int.div(this.Level-1|0,3)|0):(this.MapId=2,this.Loop=1),map=this.AddGameObject$1("Map"),map.Transform.Position2D=new JuiceboxEngine.Math.Vector2.$ctor3(0,-128),this._map=map.AddComponent(JuiceboxEngine.TileMap),this._map.TileSize=LD46Game.Game.TILE_SIZE,this._map.Sprites=this.ResourceManager.Load(JuiceboxEngine.Graphics.Texture2D,"Textures/MapSprites.png"),this._map.MapData=this.ResourceManager.Load(JuiceboxEngine.Graphics.Texture2D,System.String.format("Textures/Level{0}.png",[this.MapId])),this._level=new LD46Game.Level(this.MapId),this._level.addSpawnCarEvent(Bridge.fn.cacheBind(this,this.SpawnCar)),this._animalManager=new LD46Game.AnimalManager(this._level.AnimalRoamingSpots),this._animalManager.MainMenu=this.Level===0,this.Level!==0&&this._animalManager.addOnGameOver(Bridge.fn.cacheBind(this,this.GameOver)),i=0;i<(2+this.Loop|0);i=i+1|0)if(animalObj=this.AddGameObject$1("Animal"),animalSprite=animalObj.AddComponent(JuiceboxEngine.Sprite),animalSprite.Texture=this.ResourceManager.Load(JuiceboxEngine.Graphics.Texture2D,"Textures/Animals.png"),animalSprite.SourceRectangle=new JuiceboxEngine.Math.Rectangle.$ctor2(Bridge.Int.mul(i%3,16),0,16,16),animalSprite.Offset=new JuiceboxEngine.Math.Vector2.$ctor3(-8,0),animalAudio=animalObj.AddComponent(JuiceboxEngine.Audio.AudioComponent),animalAudio.SetAudioClip(this.ResourceManager.Load(JuiceboxEngine.Audio.AudioClip,"Audio/AnimalAlert.mp3")),animal=new LD46Game.Animal(animalObj),this._animalManager.AddAnimal(animal),this.Level!==0&&(animalWidget=new LD46Game.AnimalWidget(animal,this.GUI.Root),animal.Widget=animalWidget),this.Level===1)break;clip=this.ResourceManager.Load(JuiceboxEngine.Audio.AudioClip,"Audio/CarBrake.mp3");clip.SetGlobalVolume(.2);this._gameOver=!1},GameOver:function(win,position){var blackScreen,camObj,clip,screen;this._gameOver=!0;blackScreen=new JuiceboxEngine.GUI.Image(this.GUI.Root);blackScreen.DisplayImage=new JuiceboxEngine.Graphics.Texture2D.ctor;blackScreen.Color=JuiceboxEngine.Math.Color.Black.$clone();blackScreen.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(1e4,1e4);blackScreen.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(.5,.5);blackScreen.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(.5,.5);camObj=this.AddGameObject$1("DeathCam");this._deathCam=camObj.AddComponent(JuiceboxEngine.Camera);this._deathCam.Zoom=10;camObj.Transform.Position2D=position.$clone();this._deathCam.Target=new JuiceboxEngine.Graphics.RenderTarget(512,512);clip=this.ResourceManager.Load(JuiceboxEngine.Audio.AudioClip,win?"Audio/Win.mp3":"Audio/Crash.mp3");clip.Play();screen=new LD46Game.EndScreen(win,this._deathCam.Target,Bridge.Int.clip32(this._secondsLeft),this.Level,this.GUI.Root);win&&JuiceboxEngine.Util.LocalStorage.StoreValue("high",this.Level);screen.Retry.addOnMouseDown(Bridge.fn.bind(this,function(uiEvent){JuiceboxEngine.Util.Time.TimeScale=1;JuiceboxEngine.SceneManager.FadeOutDuration=0;win?JuiceboxEngine.SceneManager.SwitchToScene(new LD46Game.MainScene(this.ResourceManager,this.Level+1|0),.1):JuiceboxEngine.SceneManager.SwitchToScene(new LD46Game.MainScene(this.ResourceManager,this.Level),.1)}));screen.Menu.addOnMouseDown(Bridge.fn.bind(this,function(uiEvent){JuiceboxEngine.Util.Time.TimeScale=1;JuiceboxEngine.SceneManager.FadeOutDuration=0;JuiceboxEngine.SceneManager.SwitchToScene(new LD46Game.MainScene(this.ResourceManager,0),.1)}))},PreUpdate:function(){var i,car;if(this._gameOver){JuiceboxEngine.Util.Time.TimeScale=0;return}for(this.Level!==0&&(this._secondsLeft-=JuiceboxEngine.Util.Time.DeltaTime,this._secondsLeft<=0?this.GameOver(!0,JuiceboxEngine.Math.Vector2.Zero.$clone()):this._timer.DisplayTime(Bridge.Int.clip32(this._secondsLeft))),JuiceboxEngine.Util.Time.TimeScale=JuiceboxEngine.SceneManager.Fading?0:1,this._level.Update(),i=0;i<this._cars.Count;i=i+1|0)car=this._cars.getItem(i),car.Update(this.DefaultCamera),car.ShouldBeRemoved&&(car.CarBehind!=null&&(car.CarBehind.CarInFront=null,car.CarBehind=null),this.DestroyGameObject(car.GameObj),this._cars.removeAt(i),i=i-1|0);this._animalManager.Update(this.DefaultCamera,this._cars)},SpawnCar:function(position,direction){var carObj=this.AddGameObject$1("Car"+this._carCount),car,hashCode,carInFront,carSprite,audio,clip;carObj.Transform.Position2D=position.$clone();car=new LD46Game.Car(carObj,direction.$clone());car.DespawnDistance=this._level.DespawnDistance;this.Level!==0&&car.SetWidget(new LD46Game.CarWidget(this.GUI.Root,car));this._cars.add(car);hashCode=position.getHashCode();carInFront={};this._newestCars.tryGetValue(hashCode,carInFront)?(car.CarInFront=carInFront.v,carInFront.v.CarBehind=car,this._newestCars.setItem(hashCode,car)):this._newestCars.add(hashCode,car);carSprite=carObj.AddComponent(JuiceboxEngine.Sprite);carSprite.Texture=this.ResourceManager.Load(JuiceboxEngine.Graphics.Texture2D,"Textures/Cars.png");carSprite.SourceRectangle=new JuiceboxEngine.Math.Rectangle.$ctor2(Bridge.Int.mul(16,JuiceboxEngine.Util.Random.NextRange(0,4)),Bridge.Int.mul(16,JuiceboxEngine.Util.Random.NextRange(0,4)),16,16);carSprite.Offset=direction.X>0?new JuiceboxEngine.Math.Vector2.$ctor3(-14,0):new JuiceboxEngine.Math.Vector2.$ctor3(-2,0);direction.X<0&&(carSprite.Flip=JuiceboxEngine.Sprite.SpriteFlip.HorizontalFlip);audio=carObj.AddComponent(JuiceboxEngine.Audio.AudioComponent);clip=this.ResourceManager.Load(JuiceboxEngine.Audio.AudioClip,"Audio/CarBrake.mp3");audio.SetAudioClip(clip);this._carCount=this._carCount+1|0},LateUpdate:function(){JuiceboxEngine.Input.InputManager.Instance.KeyPressed("m")&&JuiceboxEngine.Audio.AudioManager.Mute(!JuiceboxEngine.Audio.AudioManager.Muted)},FinalizeScene:function(){}}});Bridge.define("LD46Game.Timer",{inherits:[JuiceboxEngine.GUI.EmptyUIElement],fields:{_timeText:null,_bigCountdown:null},ctors:{ctor:function(parent){var background,foreground;this.$initialize();JuiceboxEngine.GUI.EmptyUIElement.ctor.call(this,parent);this.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(.5,1);this.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(.5,1);this.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(300,50);this.InputType=JuiceboxEngine.GUI.UIInput.NONE;this.Position=new JuiceboxEngine.Math.Vector2.$ctor3(0,-4);background=new JuiceboxEngine.GUI.SlicedImage(this);background.Position=new JuiceboxEngine.Math.Vector2.$ctor3(3,-3);background.Dimensions=this.Dimensions.$clone();background.DisplayImage=this.ResourceManager.Load(JuiceboxEngine.Graphics.Texture2D,"Textures/UIBox.png");background.Border=15;background.Color=new JuiceboxEngine.Math.Color.$ctor2(230,126,34,255);foreground=new JuiceboxEngine.GUI.SlicedImage(background);foreground.Position=new JuiceboxEngine.Math.Vector2.$ctor3(-3,3);foreground.Dimensions=this.Dimensions.$clone();foreground.DisplayImage=this.ResourceManager.Load(JuiceboxEngine.Graphics.Texture2D,"Textures/UIBox.png");foreground.Border=15;foreground.Color=new JuiceboxEngine.Math.Color.$ctor2(241,196,15,255);this._timeText=new JuiceboxEngine.GUI.Text(this);this._timeText.Font=this.ResourceManager.Load(JuiceboxEngine.Graphics.Font,"Fonts/RetroGaming.bff");this._timeText.DisplayText="13:37";this._timeText.TextAlignment=JuiceboxEngine.GUI.TextAlignment.Center;this._timeText.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(.5,.5);this._timeText.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(.5,.5);this._timeText.ShadowOffset=new JuiceboxEngine.Math.Point.$ctor1(2,-2);this._timeText.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(this._timeText.Font.GetWidth(this._timeText.DisplayText),32);this._bigCountdown=new JuiceboxEngine.GUI.Text(parent);this._bigCountdown.DisplayText="3";this._bigCountdown.Font=this.ResourceManager.Load(JuiceboxEngine.Graphics.Font,"Fonts/RetroGaming.bff");this._bigCountdown.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(this._bigCountdown.Font.GetWidth(this._bigCountdown.DisplayText),32);this._bigCountdown.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(.5,.5);this._bigCountdown.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(.5,.75);this._bigCountdown.ShadowOffset=new JuiceboxEngine.Math.Point.$ctor1(2,-2)}},methods:{DisplayTime:function(seconds){var span=new System.TimeSpan(0,0,seconds);this._timeText.DisplayText=System.String.format("Time left: {0}:{1}",span.getMinutes(),System.String.alignString(Bridge.toString(span.getSeconds()),2,48));this._timeText.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(this._timeText.Font.GetWidth(this._timeText.DisplayText),32);seconds===60||seconds===59||seconds===58?(this._bigCountdown.DisplayText="Clear 60 seconds!",this._bigCountdown.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(this._bigCountdown.Font.GetWidth("Clear 60"),32)):seconds===30||seconds===29?(this._bigCountdown.DisplayText="30 more seconds!",this._bigCountdown.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(this._bigCountdown.Font.GetWidth(this._bigCountdown.DisplayText),32)):seconds===15||seconds===14?(this._bigCountdown.DisplayText="15 seconds to go!",this._bigCountdown.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(this._bigCountdown.Font.GetWidth(this._bigCountdown.DisplayText),32)):seconds<=5?(this._bigCountdown.DisplayText=seconds===0?"1":Bridge.toString(seconds),this._bigCountdown.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(this._bigCountdown.Font.GetWidth(this._bigCountdown.DisplayText),32)):this._bigCountdown.DisplayText=""}}})});