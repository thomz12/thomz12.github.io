H5.assemblyVersion("LD50","1.0.0.0");H5.assembly("LD50",function($asm,globals){"use strict";H5.define("LD50.Circle",{$kind:"struct",statics:{methods:{getDefaultValue:function(){return new LD50.Circle}}},fields:{Center:null,Radius:0},ctors:{init:function(){this.Center=new JuiceboxEngine.Math.Vector2},$ctor1:function(center,radius){this.$initialize();this.Center=center.$clone();this.Radius=radius},ctor:function(){this.$initialize()}},methods:{getHashCode:function(){return H5.addHash([1668468399,this.Center,this.Radius])},equals:function(o){return H5.is(o,LD50.Circle)?H5.equals(this.Center,o.Center)&&H5.equals(this.Radius,o.Radius):!1},$clone:function(to){var s=to||new LD50.Circle;return s.Center=this.Center.$clone(),s.Radius=this.Radius,s}}});H5.define("LD50.Dish",{fields:{Name:null,Mass:0,SpriteOffset:null,SourceRectangle:null,BoundingBoxes:null,Circles:null},ctors:{init:function(){this.SpriteOffset=new JuiceboxEngine.Math.Vector2;this.SourceRectangle=new JuiceboxEngine.Math.Rectangle}}});H5.define("LD50.Dishes",{statics:{fields:{DishList:null},ctors:{init:function(){var $t;this.DishList=System.Array.init([($t=new LD50.Dish,$t.Name="Plate",$t.Mass=1,$t.SpriteOffset=new JuiceboxEngine.Math.Vector2.$ctor3(-8,-8),$t.SourceRectangle=new JuiceboxEngine.Math.Rectangle.$ctor2(0,0,16,16),$t.BoundingBoxes=System.Array.init([],JuiceboxEngine.Math.RectangleF),$t.Circles=System.Array.init([new LD50.Circle.$ctor1(new JuiceboxEngine.Math.Vector2.$ctor3(0,0),8)],LD50.Circle),$t),($t=new LD50.Dish,$t.Name="Cup",$t.Mass=.5,$t.SpriteOffset=new JuiceboxEngine.Math.Vector2.$ctor3(-6,-5),$t.SourceRectangle=new JuiceboxEngine.Math.Rectangle.$ctor2(192,6,12,10),$t.BoundingBoxes=System.Array.init([new JuiceboxEngine.Math.RectangleF.$ctor2(-1,0,10,9)],JuiceboxEngine.Math.RectangleF),$t.Circles=System.Array.init([],LD50.Circle),$t),($t=new LD50.Dish,$t.Name="Glass",$t.Mass=.4,$t.SpriteOffset=new JuiceboxEngine.Math.Vector2.$ctor3(-4.5,-7.5),$t.SourceRectangle=new JuiceboxEngine.Math.Rectangle.$ctor2(208,3,9,13),$t.BoundingBoxes=System.Array.init([new JuiceboxEngine.Math.RectangleF.$ctor2(0,0,9,13)],JuiceboxEngine.Math.RectangleF),$t.Circles=System.Array.init([],LD50.Circle),$t),($t=new LD50.Dish,$t.Name="Cuttingboard",$t.Mass=1,$t.SpriteOffset=new JuiceboxEngine.Math.Vector2.$ctor3(-8,-4.5),$t.SourceRectangle=new JuiceboxEngine.Math.Rectangle.$ctor2(240,55,16,9),$t.BoundingBoxes=System.Array.init([new JuiceboxEngine.Math.RectangleF.$ctor2(0,0,16,9)],JuiceboxEngine.Math.RectangleF),$t.Circles=System.Array.init([],LD50.Circle),$t),($t=new LD50.Dish,$t.Name="Fork",$t.Mass=.3,$t.SpriteOffset=new JuiceboxEngine.Math.Vector2.$ctor3(-3,-7),$t.SourceRectangle=new JuiceboxEngine.Math.Rectangle.$ctor2(96,3,6,14),$t.BoundingBoxes=System.Array.init([new JuiceboxEngine.Math.RectangleF.$ctor2(0,0,5,11)],JuiceboxEngine.Math.RectangleF),$t.Circles=System.Array.init([],LD50.Circle),$t),($t=new LD50.Dish,$t.Name="Spoon",$t.Mass=.3,$t.SpriteOffset=new JuiceboxEngine.Math.Vector2.$ctor3(-3,-7),$t.SourceRectangle=new JuiceboxEngine.Math.Rectangle.$ctor2(96,19,6,14),$t.BoundingBoxes=System.Array.init([new JuiceboxEngine.Math.RectangleF.$ctor2(0,0,5,11)],JuiceboxEngine.Math.RectangleF),$t.Circles=System.Array.init([],LD50.Circle),$t),($t=new LD50.Dish,$t.Name="Knife",$t.Mass=.3,$t.SpriteOffset=new JuiceboxEngine.Math.Vector2.$ctor3(-3,-7),$t.SourceRectangle=new JuiceboxEngine.Math.Rectangle.$ctor2(96,35,5,14),$t.BoundingBoxes=System.Array.init([new JuiceboxEngine.Math.RectangleF.$ctor2(0,0,5,11)],JuiceboxEngine.Math.RectangleF),$t.Circles=System.Array.init([],LD50.Circle),$t),($t=new LD50.Dish,$t.Name="Butcherknife",$t.Mass=1,$t.SpriteOffset=new JuiceboxEngine.Math.Vector2.$ctor3(-4.5,-11),$t.SourceRectangle=new JuiceboxEngine.Math.Rectangle.$ctor2(128,0,9,16),$t.BoundingBoxes=System.Array.init([new JuiceboxEngine.Math.RectangleF.$ctor2(0,0,8,9),new JuiceboxEngine.Math.RectangleF.$ctor2(2.5,-8,3,7)],JuiceboxEngine.Math.RectangleF),$t.Circles=System.Array.init([],LD50.Circle),$t),($t=new LD50.Dish,$t.Name="Roller",$t.Mass=.8,$t.SpriteOffset=new JuiceboxEngine.Math.Vector2.$ctor3(-2.5,-8),$t.SourceRectangle=new JuiceboxEngine.Math.Rectangle.$ctor2(144,0,5,16),$t.BoundingBoxes=System.Array.init([new JuiceboxEngine.Math.RectangleF.$ctor2(0,0,4,15)],JuiceboxEngine.Math.RectangleF),$t.Circles=System.Array.init([],LD50.Circle),$t),($t=new LD50.Dish,$t.Name="Ladle",$t.Mass=.4,$t.SpriteOffset=new JuiceboxEngine.Math.Vector2.$ctor3(-2,-6),$t.SourceRectangle=new JuiceboxEngine.Math.Rectangle.$ctor2(112,0,6,16),$t.BoundingBoxes=System.Array.init([new JuiceboxEngine.Math.RectangleF.$ctor2(0,2,4,16)],JuiceboxEngine.Math.RectangleF),$t.Circles=System.Array.init([],LD50.Circle),$t),($t=new LD50.Dish,$t.Name="Pan",$t.Mass=1.5,$t.SpriteOffset=new JuiceboxEngine.Math.Vector2.$ctor3(-14,-8),$t.SourceRectangle=new JuiceboxEngine.Math.Rectangle.$ctor2(16,0,28,16),$t.BoundingBoxes=System.Array.init([new JuiceboxEngine.Math.RectangleF.$ctor2(6,0,12,4)],JuiceboxEngine.Math.RectangleF),$t.Circles=System.Array.init([new LD50.Circle.$ctor1(new JuiceboxEngine.Math.Vector2.$ctor3(-6,0),8)],LD50.Circle),$t),($t=new LD50.Dish,$t.Name="Saucepan",$t.Mass=1.5,$t.SpriteOffset=new JuiceboxEngine.Math.Vector2.$ctor3(-9.5,-6),$t.SourceRectangle=new JuiceboxEngine.Math.Rectangle.$ctor2(64,4,19,12),$t.BoundingBoxes=System.Array.init([new JuiceboxEngine.Math.RectangleF.$ctor2(4.5,0,9,4)],JuiceboxEngine.Math.RectangleF),$t.Circles=System.Array.init([new LD50.Circle.$ctor1(new JuiceboxEngine.Math.Vector2.$ctor3(-4,0),6)],LD50.Circle),$t),($t=new LD50.Dish,$t.Name="Pot",$t.Mass=1.5,$t.SpriteOffset=new JuiceboxEngine.Math.Vector2.$ctor3(-8,-8),$t.SourceRectangle=new JuiceboxEngine.Math.Rectangle.$ctor2(288,0,16,16),$t.BoundingBoxes=System.Array.init([new JuiceboxEngine.Math.RectangleF.$ctor2(0,0,15,15)],JuiceboxEngine.Math.RectangleF),$t.Circles=System.Array.init([],LD50.Circle),$t),($t=new LD50.Dish,$t.Name="Towel",$t.Mass=.3,$t.SpriteOffset=new JuiceboxEngine.Math.Vector2.$ctor3(-8,-8),$t.SourceRectangle=new JuiceboxEngine.Math.Rectangle.$ctor2(256,16,16,16),$t.BoundingBoxes=System.Array.init([new JuiceboxEngine.Math.RectangleF.$ctor2(0,0,16,16)],JuiceboxEngine.Math.RectangleF),$t.Circles=System.Array.init([],LD50.Circle),$t),($t=new LD50.Dish,$t.Name="Ricecooker",$t.Mass=2,$t.SpriteOffset=new JuiceboxEngine.Math.Vector2.$ctor3(-8,-6),$t.SourceRectangle=new JuiceboxEngine.Math.Rectangle.$ctor2(304,3,16,13),$t.BoundingBoxes=System.Array.init([new JuiceboxEngine.Math.RectangleF.$ctor2(0,0,16,13)],JuiceboxEngine.Math.RectangleF),$t.Circles=System.Array.init([],LD50.Circle),$t),($t=new LD50.Dish,$t.Name="Toaster",$t.Mass=2,$t.SpriteOffset=new JuiceboxEngine.Math.Vector2.$ctor3(-8,-4),$t.SourceRectangle=new JuiceboxEngine.Math.Rectangle.$ctor2(272,3,15,13),$t.BoundingBoxes=System.Array.init([new JuiceboxEngine.Math.RectangleF.$ctor2(0,0,15,8)],JuiceboxEngine.Math.RectangleF),$t.Circles=System.Array.init([],LD50.Circle),$t)],LD50.Dish)}}}});H5.define("LD50.JuiceUI.JuiceUIPanel",{inherits:[JuiceboxEngine.GUI.EmptyUIElement],fields:{_front:null,_back:null,_height:0},props:{Height:{get:function(){return this._height},set:function(value){this._height=value;this.ForceUpdate()}}},ctors:{ctor:function(parent){this.$initialize();JuiceboxEngine.GUI.EmptyUIElement.ctor.call(this,parent);this._back=new JuiceboxEngine.GUI.SlicedImage(this);this._front=new JuiceboxEngine.GUI.SlicedImage(this);this._back.DisplayImage=this.ResourceManager.Load(JuiceboxEngine.Graphics.Texture2D,LD50.JuiceUI.JuiceUIConsts.PANEL_TEXTURE_PATH);this._front.DisplayImage=this.ResourceManager.Load(JuiceboxEngine.Graphics.Texture2D,LD50.JuiceUI.JuiceUIConsts.PANEL_TEXTURE_PATH);this._back.Border=LD50.JuiceUI.JuiceUIConsts.PANEL_BORDER_WIDTH;this._front.Border=LD50.JuiceUI.JuiceUIConsts.PANEL_BORDER_WIDTH;this._height=LD50.JuiceUI.JuiceUIConsts.PANEL_OFFSET;this._back.Color=LD50.JuiceUI.JuiceUIConsts.PANEL_BACK.$clone();this._front.Color=LD50.JuiceUI.JuiceUIConsts.PANEL_FRONT.$clone()}},methods:{UpdateElement:function(){JuiceboxEngine.GUI.EmptyUIElement.prototype.UpdateElement.call(this);this._back.Position=new JuiceboxEngine.Math.Vector2.$ctor3(this.Height,-this.Height);this._front.Position=new JuiceboxEngine.Math.Vector2.$ctor3(-this.Height,this.Height);this._back.Dimensions=this.Dimensions.$clone();this._front.Dimensions=this.Dimensions.$clone()}}});H5.define("LD50.JuiceUI.JuiceUIConsts",{statics:{fields:{FONT_32_PATH:null,FONT_48_PATH:null,FONT_SHADOW_OFFSET:null,PANEL_TEXTURE_PATH:null,PANEL_BORDER_WIDTH:0,PANEL_OFFSET:0,PANEL_FRONT:null,PANEL_BACK:null},ctors:{init:function(){this.FONT_SHADOW_OFFSET=new JuiceboxEngine.Math.Point;this.PANEL_FRONT=new JuiceboxEngine.Math.Color;this.PANEL_BACK=new JuiceboxEngine.Math.Color;this.FONT_32_PATH="JuiceUI/AldotheApache32.bff";this.FONT_48_PATH="JuiceUI/AldotheApache48.bff";this.FONT_SHADOW_OFFSET=new JuiceboxEngine.Math.Point.$ctor1(2,-2);this.PANEL_TEXTURE_PATH="JuiceUI/Panel.png";this.PANEL_BORDER_WIDTH=5;this.PANEL_OFFSET=2;this.PANEL_FRONT=new JuiceboxEngine.Math.Color.$ctor2(215,123,186,255);this.PANEL_BACK=new JuiceboxEngine.Math.Color.$ctor2(118,66,138,255)}}}});H5.define("LD50.MainMenu",{inherits:[JuiceboxEngine.Scene],fields:{_logo:null,_play:null,_background:null,_playfabText:null,username:null},ctors:{ctor:function(manager){this.$initialize();JuiceboxEngine.Scene.ctor.call(this,manager)}},methods:{InitializeScene:function(){var music,map,text,sprite,element,ui,signin;this._background=this.AddGameObject$1("background");this._background=this.AddGameObject$1("background");music=this._background.AddComponent(JuiceboxEngine.Audio.AudioComponent);music.SetAudioClip(this.ResourceManager.Load(JuiceboxEngine.Audio.AudioClip,"Audio/background_mainmenu.mp3"));music.Play();music.Loop(!0);map=this._background.AddComponent(JuiceboxEngine.TileMap);map.Sprites=this.ResourceManager.Load(JuiceboxEngine.Graphics.Texture2D,"Textures/background.png");map.TileSize=32;map.MapData=new JuiceboxEngine.Graphics.Texture2D.$ctor1(1,1,System.Array.init([0,0,0,0],System.Byte));map.Parallax=.9;this.DefaultCamera.Zoom=4;this._logo=this.AddGameObject$1("Logo");this._logo.Transform.Position2D=new JuiceboxEngine.Math.Vector2.$ctor3(0,32);text=new JuiceboxEngine.GUI.Text(this.GUI.Root);text.DisplayText="2022 - Created by Mathijs Koning and Thom Zeilstra";text.ResizeToText(16);text.Pivot=JuiceboxEngine.GUI.UIDefaults.TopCenter.$clone();text.Anchor=JuiceboxEngine.GUI.UIDefaults.TopCenter.$clone();text.ShadowOffset=new JuiceboxEngine.Math.Point.$ctor1(1,-1);this._playfabText=new JuiceboxEngine.GUI.Text(this.GUI.Root);this._playfabText.DisplayText="Signing you in...";this._playfabText.ResizeToText(16);this._playfabText.Pivot=JuiceboxEngine.GUI.UIDefaults.BottomLeft.$clone();this._playfabText.Anchor=JuiceboxEngine.GUI.UIDefaults.BottomLeft.$clone();this._playfabText.ShadowOffset=new JuiceboxEngine.Math.Point.$ctor1(1,-1);this._playfabText.addOnMouseUp(H5.fn.bind(this,function(x){this.AskUsername()}));sprite=this._logo.AddComponent(JuiceboxEngine.Sprite);sprite.Texture=this.ResourceManager.Load(JuiceboxEngine.Graphics.Texture2D,"Textures/icon.png");sprite.Offset=new JuiceboxEngine.Math.Vector2.$ctor3(H5.Int.div(-sprite.Texture.Width|0,2)|0,H5.Int.div(-sprite.Texture.Height|0,2)|0);sprite.Size=JuiceboxEngine.Math.Vector2.op_Multiply$1(sprite.Size.$clone(),1.4);this._play=this.AddGameObject$1("Play");this._play.Transform.Position2D=new JuiceboxEngine.Math.Vector2.$ctor3(0,-16);sprite=this._play.AddComponent(JuiceboxEngine.Sprite);sprite.Texture=this.ResourceManager.Load(JuiceboxEngine.Graphics.Texture2D,"Textures/Play.png");sprite.Offset=new JuiceboxEngine.Math.Vector2.$ctor3(H5.Int.div(-sprite.Texture.Width|0,2)|0,H5.Int.div(-sprite.Texture.Height|0,2)|0);element=new JuiceboxEngine.GUI.EmptyUIElement.ctor(this.GUI.Root);element.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(200,100);element.ShowDebugBounds=!0;element.Pivot=JuiceboxEngine.GUI.UIDefaults.Centered.$clone();element.addOnMouseEnter(H5.fn.cacheBind(this,this.MouseEnterStart));element.addOnMouseExit(H5.fn.cacheBind(this,this.MouseExitStart));element.addOnMouseUp(H5.fn.cacheBind(this,this.PlayGame));ui=this._play.AddComponent(JuiceboxEngine.UIComponent);ui.Setup(element,this);signin=new LD50.PlayfabSignin;signin.AutoLogin();signin.addOnStateChange(H5.fn.cacheBind(this,this.LoginChange))},LoginChange:function(state){if(state===LD50.PlayfabSignin.LoginState.SIGNED_IN){this._playfabText.DisplayText="Signed in! Click here to change your name";var task=JuiceboxEngine.Playfab.PlayfabManager.Identity.GetDisplayName(JuiceboxEngine.Playfab.PlayfabManager.Identity.PlayfabId);task.addOnTaskCompleted(H5.fn.cacheBind(this,this.GotUsername))}else state===LD50.PlayfabSignin.LoginState.REGISTERING?this._playfabText.DisplayText="Registering...":state===LD50.PlayfabSignin.LoginState.ERROR&&(this._playfabText.DisplayText="Error signing you in...")},GotUsername:function(task){task.Success&&(this.username=task.Response.InfoResultPayload.AccountInfo.TitleInfo.DisplayName,this.username!=null&&(this._playfabText.DisplayText=System.String.format("Welcome, {0}, click here to change your name",[this.username]),this._playfabText.ResizeToText(16)))},MouseExitStart:function(ev){JuiceboxEngine.Coroutines.CoroutineManager.StartCoroutine(JuiceboxEngine.Coroutines.DefaultRoutines.Linear(.2,H5.fn.bind(this,function(x){this._play.GetComponent(JuiceboxEngine.Sprite).Size=JuiceboxEngine.Math.Vector2.op_Addition(new JuiceboxEngine.Math.Vector2.$ctor3(1,1),JuiceboxEngine.Math.Vector2.op_Multiply$1(new JuiceboxEngine.Math.Vector2.$ctor3(.2,.2),JuiceboxEngine.Math.Easings.QuadraticEaseOut(1-x)))})))},MouseEnterStart:function(ev){JuiceboxEngine.Coroutines.CoroutineManager.StartCoroutine(JuiceboxEngine.Coroutines.DefaultRoutines.Linear(.2,H5.fn.bind(this,function(x){this._play.GetComponent(JuiceboxEngine.Sprite).Size=JuiceboxEngine.Math.Vector2.op_Addition(new JuiceboxEngine.Math.Vector2.$ctor3(1,1),JuiceboxEngine.Math.Vector2.op_Multiply$1(new JuiceboxEngine.Math.Vector2.$ctor3(.2,.2),JuiceboxEngine.Math.Easings.QuadraticEaseOut(x)))})))},PlayGame:function(ev){JuiceboxEngine.Playfab.PlayfabManager.Identity.LoggedIn&&JuiceboxEngine.Playfab.PlayfabManager.Identity.GetDisplayNameTask.Finished&&JuiceboxEngine.Playfab.PlayfabManager.Identity.Username==null&&this.AskUsername();this.SceneManager.SwitchToScene(new LD50.MainScene(this.ResourceManager))},AskUsername:function(){try{var defaultname=System.String.format("Washer #{0}",[JuiceboxEngine.Util.Random.NextRange(1e3,1e4)]),username=JuiceboxEngine.Util.Browser.Prompt("Username for leaderboards:",defaultname);username==null&&(username=defaultname)}catch($e1){$e1=System.Exception.create($e1);System.Console.WriteLine("Can't ask username...");return}JuiceboxEngine.Playfab.PlayfabManager.Identity.UpdateDisplayName(this.username)},PreUpdate:function(){this._logo.Transform.Rotation2D=JuiceboxEngine.Math.JMath.Sin(2*JuiceboxEngine.Util.Time.TotalSeconds)*JuiceboxEngine.Math.JMath.PI/16;this._play.Transform.Rotation2D=JuiceboxEngine.Math.JMath.Sin(JuiceboxEngine.Util.Time.TotalSeconds+JuiceboxEngine.Math.JMath.PI)*JuiceboxEngine.Math.JMath.PI/32;this._background.Transform.Translate2D(JuiceboxEngine.Math.Vector2.op_Multiply$1(new JuiceboxEngine.Math.Vector2.$ctor3(8,8),JuiceboxEngine.Util.Time.DeltaTime))},LateUpdate:function(){},FinalizeScene:function(){}}});H5.define("LD50.MainScene",{inherits:[JuiceboxEngine.Scene],statics:{fields:{MIN_DIST:0},ctors:{init:function(){this.MIN_DIST=48}}},fields:{_counter:null,_dishes:null,_highestPoint:0,_curHeight:0,_aiming:!1,_gameover:!1,_moving:!1,_aimingObject:null,_dishMass:0,_scoreText:null,_background:null,_leaderboardEntries:null,_leaderboardText:null,_camXTarget:0},ctors:{ctor:function(manager){this.$initialize();JuiceboxEngine.Scene.ctor.call(this,manager);this._dishes=new(System.Collections.Generic.List$1(JuiceboxEngine.Physics.BodyP2).ctor);this._leaderboardText=new(System.Collections.Generic.List$1(JuiceboxEngine.GUI.Text).ctor)}},methods:{InitializeScene:function(){var music,map;this.DefaultCamera.ClearColor=new JuiceboxEngine.Math.Color.$ctor2(30,144,255,255);this.DefaultCamera.Zoom=4;this._background=this.AddGameObject$1("background");music=this._background.AddComponent(JuiceboxEngine.Audio.AudioComponent);music.SetAudioClip(this.ResourceManager.Load(JuiceboxEngine.Audio.AudioClip,"Audio/background_music.mp3"));music.Play();music.Loop(!0);map=this._background.AddComponent(JuiceboxEngine.TileMap);map.Sprites=this.ResourceManager.Load(JuiceboxEngine.Graphics.Texture2D,"Textures/background.png");map.TileSize=32;map.MapData=new JuiceboxEngine.Graphics.Texture2D.$ctor1(1,1,System.Array.init([0,0,0,0],System.Byte));map.Parallax=.9;this.LoadLevel(this.ResourceManager.Load(JuiceboxEngine.Level,"Levels/Main.json"));this.DefaultCamera.Parent.Transform.Position2D=this.GetObjectByName("CameraPosition").Transform.Position2D.$clone();this._camXTarget=this.DefaultCamera.Parent.Transform.Position2D.X;this._counter=this.GetObjectByName("Counter");this._aiming=!0;this._scoreText=new JuiceboxEngine.GUI.Text(this.GUI.Root);this._scoreText.Font=this.ResourceManager.Load(JuiceboxEngine.Graphics.Font,LD50.JuiceUI.JuiceUIConsts.FONT_48_PATH);this._scoreText.DisplayText="";this._scoreText.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(2e3,48);this._scoreText.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(0,0);this._scoreText.ShadowOffset=new JuiceboxEngine.Math.Point.$ctor1(1,-1);this.GetLeaderboard()},GetLeaderboard:function(){if(JuiceboxEngine.Playfab.PlayfabManager.Identity.LoggedIn){var leaderboardTask=JuiceboxEngine.Playfab.PlayfabManager.Leaderboard.GetLeaderboard("highscores",0,10);leaderboardTask.addOnTaskCompleted(H5.fn.cacheBind(this,this.GotLeaderboard))}},GotLeaderboard:function(task){var leaderboardTask=task,i,text,lastHeight,i1,entry,height,newText;if(this._leaderboardText!=null){for(i=0;i<this._leaderboardText.Count;i=i+1|0)text=this._leaderboardText.getItem(i),this.GUI.Root.RemoveChild(text);for(this._leaderboardText.clear(),this._leaderboardEntries=new(System.Collections.Generic.List$1(JuiceboxEngine.Playfab.LeaderboardEntry).ctor),lastHeight=0,i1=leaderboardTask.Leaderboard.Entries.Count-1|0;i1>=0;i1=i1-1|0)entry=leaderboardTask.Leaderboard.Entries.getItem(i1).$clone(),height=entry.value/10,height-lastHeight>32&&(newText=new JuiceboxEngine.GUI.Text(this.GUI.Root),newText.Font=this.ResourceManager.Load(JuiceboxEngine.Graphics.Font,LD50.JuiceUI.JuiceUIConsts.FONT_32_PATH),newText.DisplayText=entry.displayName,newText.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(2e3,32),newText.Pivot=new JuiceboxEngine.Math.Vector2.$ctor3(0,0),newText.ShadowOffset=new JuiceboxEngine.Math.Point.$ctor1(1,-1),this._leaderboardText.add(newText),this._leaderboardEntries.add(entry.$clone()),lastHeight=height)}},PreUpdate:function(){var i,entry,height,body,world;if(this._leaderboardEntries!=null)for(i=0;i<this._leaderboardEntries.Count;i=i+1|0)entry=this._leaderboardEntries.getItem(i).$clone(),height=entry.value/10+LD50.MainScene.MIN_DIST,JuiceboxEngine.Math.JMath.Abs(this._curHeight+height)>24&&this.DrawLine(height,this._leaderboardText.getItem(i));this._aiming?(this._aimingObject==null&&(this._aimingObject=this.CreateDish()),body=this._aimingObject.GetComponent(JuiceboxEngine.Physics.BodyP2),body.Position=new JuiceboxEngine.Math.Vector2.$ctor3(body.Position.X,this._curHeight+48),(JuiceboxEngine.Input.InputManager.Instance.IsMouseKeyHeld(JuiceboxEngine.Input.MouseKey.LeftMouse)&&JuiceboxEngine.Input.InputManager.Instance.MousePosition.Y>.4||this._moving)&&(world=this.DefaultCamera.ScreenPointToWorld(JuiceboxEngine.Input.InputManager.Instance.MousePosition.$clone()),body.Position=new JuiceboxEngine.Math.Vector2.$ctor3(world.X,body.Position.Y),this._moving=!0),(JuiceboxEngine.Input.InputManager.Instance.IsKeyHeld(" ")||JuiceboxEngine.Input.InputManager.Instance.IsMouseKeyHeld(JuiceboxEngine.Input.MouseKey.LeftMouse)&&JuiceboxEngine.Input.InputManager.Instance.MousePosition.Y<.2)&&(body.Rotation+=6.2831855*JuiceboxEngine.Util.Time.DeltaTime),JuiceboxEngine.Input.InputManager.Instance.IsMouseKeyUp(JuiceboxEngine.Input.MouseKey.LeftMouse)&&this._moving&&(body.Mass=this._dishMass,body.Velocity=new JuiceboxEngine.Math.Vector2.$ctor3(0,-20),this._aiming=!1,this._moving=!1,this._dishMass=0)):this._aimingObject!=null&&this._aimingObject.GetComponent(JuiceboxEngine.Physics.BodyP2).Sleeping&&(this._aiming=!0,this._aimingObject.GetComponent(JuiceboxEngine.Physics.BodyP2).Type=2,JuiceboxEngine.Coroutines.CoroutineManager.StartCoroutine(this.SecureObject(this._aimingObject)),this._aimingObject=null)},SecureObject:function(obj){var $s=0,$jff,$rv,sprite,$ae,$en=new H5.GeneratorEnumerator(H5.fn.bind(this,function(){try{for(;;)switch($s){case 0:return sprite=obj.GetComponent(JuiceboxEngine.Sprite),$en.current=new JuiceboxEngine.Coroutines.WaitForCoroutine.$ctor1(JuiceboxEngine.Coroutines.DefaultRoutines.Linear(.25,function(x){sprite.Size=JuiceboxEngine.Math.Vector2.op_Addition(new JuiceboxEngine.Math.Vector2.$ctor3(1,1),JuiceboxEngine.Math.Vector2.op_Multiply$1(new JuiceboxEngine.Math.Vector2.$ctor3(.5,.5),1-JuiceboxEngine.Math.Easings.QuadraticEaseOut(x)))})),$s=1,!0;case 1:default:return!1}}catch($ae1){$ae=System.Exception.create($ae1);throw $ae;}}));return $en},CreateDish:function(){var $t,$t1,dish=LD50.Dishes.DishList[JuiceboxEngine.Util.Random.NextRange(0,LD50.Dishes.DishList.length)],dishObj=this.AddGameObject$1(dish.Name),sprite,body,i,circle,i1,rect;for(dishObj.Transform.Position2D=JuiceboxEngine.Math.Vector2.op_Addition(new JuiceboxEngine.Math.Vector2.$ctor3(this._camXTarget,this.DefaultCamera.Parent.Transform.Position2D.Y),new JuiceboxEngine.Math.Vector2.$ctor3(JuiceboxEngine.Util.Random.NextRange(-8,8),64)),sprite=dishObj.AddComponent(JuiceboxEngine.Sprite),sprite.Texture=this.ResourceManager.Load(JuiceboxEngine.Graphics.Texture2D,"Textures/Dishes.png"),sprite.SourceRectangle=dish.SourceRectangle.$clone(),sprite.Offset=dish.SpriteOffset.$clone(),body=dishObj.AddComponent(JuiceboxEngine.Physics.BodyP2),body.Mass=0,body.Rotation=JuiceboxEngine.Util.Random.NextRange$1(0,6.2831855),this._dishMass=dish.Mass,body.addOnCollisionStart(H5.fn.cacheBind(this,this.BodyCollision)),i=0;i<dish.Circles.length;i=i+1|0)circle=($t=dish.Circles)[i].$clone(),body.AddCircle(circle.Radius,circle.Center.$clone());for(i1=0;i1<dish.BoundingBoxes.length;i1=i1+1|0)rect=($t1=dish.BoundingBoxes)[i1].$clone(),body.AddRectangle(rect.$clone());return this._dishes.add(body),dishObj},BodyCollision:function(OtherBody){JuiceboxEngine.Coroutines.CoroutineManager.StartCoroutine(this.Collide(OtherBody.Parent))},Collide:function(obj){var $s=0,$jff,$rv,sprite,$ae,$en=new H5.GeneratorEnumerator(H5.fn.bind(this,function(){try{for(;;)switch($s){case 0:if(sprite=obj.GetComponent(JuiceboxEngine.Sprite),sprite!=null){$s=1;continue}$s=3;continue;case 1:return sprite.Size=new JuiceboxEngine.Math.Vector2.$ctor3(1.1,1.1),$en.current=new JuiceboxEngine.Coroutines.WaitForSeconds(.1),$s=2,!0;case 2:sprite.Size=new JuiceboxEngine.Math.Vector2.$ctor3(1,1);$s=3;continue;case 3:System.String.contains(obj.Name,"Collider")&&(this._gameover||(System.Console.WriteLine("Game over!"),this._gameover=!0,JuiceboxEngine.Playfab.PlayfabManager.Leaderboard.SetLeaderboardEntry(System.Array.init(["highscores"],System.String),System.Array.init([H5.Int.clip32((this._highestPoint-LD50.MainScene.MIN_DIST)*10)],System.Int32))));default:return!1}}catch($ae1){$ae=System.Exception.create($ae1);throw $ae;}}));return $en},DebugBodyShape:function(body){var rect=body.GetAABB();JuiceboxEngine.Debugging.DebugRenderer.Instance.DrawRect(rect.$clone(),JuiceboxEngine.Math.Color.Red.$clone(),1);JuiceboxEngine.Debugging.DebugRenderer.Instance.DrawRectFilled(new JuiceboxEngine.Math.RectangleF.$ctor1(JuiceboxEngine.Math.Vector2.op_Subtraction(body.Parent.Transform.Position2D.$clone(),new JuiceboxEngine.Math.Vector2.$ctor3(1,1)),2,2),JuiceboxEngine.Math.Color.Blue.$clone())},LateUpdate:function(){var $t,camPos,interpolatedHeight,dish;if(this._highestPoint=this.GetHighestPoint(),camPos=this.DefaultCamera.Parent.Transform.Position2D.$clone(),this._curHeight<LD50.MainScene.MIN_DIST&&(this._curHeight=LD50.MainScene.MIN_DIST),interpolatedHeight=JuiceboxEngine.Math.JMath.Interpolate(this._curHeight,this._highestPoint,3*JuiceboxEngine.Util.Time.DeltaTime),this._curHeight=interpolatedHeight,this._scoreText.DisplayText=System.Single.format(JuiceboxEngine.Math.JMath.Round((interpolatedHeight-LD50.MainScene.MIN_DIST)*10)/10),this.DrawLine(interpolatedHeight,this._scoreText),this._aimingObject==null||this._aimingObject.Transform.Position2D.Y>this._curHeight?this._highestPoint-this._curHeight<1&&(this.DefaultCamera.Parent.Transform.Position2D=new JuiceboxEngine.Math.Vector2.$ctor3(JuiceboxEngine.Math.JMath.Interpolate(camPos.X,this._camXTarget,2*JuiceboxEngine.Util.Time.DeltaTime),JuiceboxEngine.Math.JMath.Interpolate(camPos.Y,this._highestPoint,2*JuiceboxEngine.Util.Time.DeltaTime))):this.DefaultCamera.Parent.Transform.Position2D=new JuiceboxEngine.Math.Vector2.$ctor3(JuiceboxEngine.Math.JMath.Interpolate(camPos.X,this._aimingObject.Transform.Position2D.X,2*JuiceboxEngine.Util.Time.DeltaTime),JuiceboxEngine.Math.JMath.Interpolate(camPos.Y,this._aimingObject.Transform.Position2D.Y,2*JuiceboxEngine.Util.Time.DeltaTime)),this.DefaultCamera.Parent.Transform.Position2D=new JuiceboxEngine.Math.Vector2.$ctor3(this.DefaultCamera.Parent.Transform.Position2D.X,JuiceboxEngine.Math.JMath.Clamp$1(this.DefaultCamera.Parent.Transform.Position2D.Y,this.DefaultCamera.Frustum.Height/2,4e6)),JuiceboxEngine.Input.InputManager.Instance.IsKeyHeld("h")){this.DebugBodyShape(this._counter.GetComponent(JuiceboxEngine.Physics.BodyP2));$t=H5.getEnumerator(this._dishes);try{while($t.moveNext())dish=$t.Current,this.DebugBodyShape(dish)}finally{H5.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}}},DrawLine:function(height,text){height<=LD50.MainScene.MIN_DIST||(JuiceboxEngine.Debugging.DebugRenderer.Instance.DrawLine(new JuiceboxEngine.Math.Vector2.$ctor3(this.DefaultCamera.Parent.Transform.Position2D.X-100,height),new JuiceboxEngine.Math.Vector2.$ctor3(this.DefaultCamera.Parent.Transform.Position2D.X+100,height),new JuiceboxEngine.Math.Color.$ctor2(128,128,128,128),1),text.Anchor=new JuiceboxEngine.Math.Vector2.$ctor3(.75,this.DefaultCamera.WorldToScreenPoint(new JuiceboxEngine.Math.Vector2.$ctor3(0,height)).Y))},GetHighestPoint:function(){for(var body,height,highest=LD50.MainScene.MIN_DIST,i=0;i<this._dishes.Count;i=i+1|0)(body=this._dishes.getItem(i),H5.referenceEquals(body.Parent,this._aimingObject))||(height=body.GetAABB().Top,height>highest&&(highest=height));return highest},FinalizeScene:function(){}}});H5.define("LD50.PlayfabSignin",{fields:{_loginID:null,_currentState:0},events:{OnStateChange:null,OnUsernameChanged:null},props:{CurrentState:{get:function(){return this._currentState},set:function(value){this._currentState=value;H5.staticEquals(this.OnStateChange,null)?null:this.OnStateChange(this._currentState)}}},ctors:{ctor:function(){this.$initialize();this._currentState=LD50.PlayfabSignin.LoginState.NONE}},methods:{AutoLogin:function(){this._loginID=JuiceboxEngine.Util.LocalStorage.GetValue("login_id");this._loginID==null?(this._loginID=System.Guid.NewGuid().toString(),System.Console.WriteLine("Registering with Playfab..."),this.CurrentState=LD50.PlayfabSignin.LoginState.REGISTERING,JuiceboxEngine.Playfab.PlayfabManager.Identity.LoginWithCustomID(this._loginID,!0)):(System.Console.WriteLine("Logging in with Playfab..."),this.CurrentState=LD50.PlayfabSignin.LoginState.REGISTERING,JuiceboxEngine.Playfab.PlayfabManager.Identity.LoginWithCustomID(this._loginID,!1));JuiceboxEngine.Playfab.PlayfabManager.Identity.LoginTask.addOnTaskCompleted(H5.fn.cacheBind(this,this.LoginFinished))},ChangeName:function(username){this.CurrentState!==LD50.PlayfabSignin.LoginState.SIGNED_IN&&System.Console.WriteLine("Can't change name, user is not signed in.");System.Console.WriteLine(System.String.format("Attempting to update username to {0}",[username]));var task=JuiceboxEngine.Playfab.PlayfabManager.Identity.UpdateDisplayName(username);task.addOnTaskCompleted(H5.fn.cacheBind(this,this.UpdateUsername))},LoginFinished:function(task){task.Success?(JuiceboxEngine.Util.LocalStorage.StoreValue("login_id",this._loginID),System.Console.WriteLine(System.String.format("Logged in with Playfab! {0}",[JuiceboxEngine.Playfab.PlayfabManager.Identity.Username])),this.CurrentState=LD50.PlayfabSignin.LoginState.SIGNED_IN):(this.CurrentState=LD50.PlayfabSignin.LoginState.ERROR,System.Console.WriteLine("Failed to log in with Playfab."))},UpdateUsername:function(task){H5.staticEquals(this.OnUsernameChanged,null)?null:this.OnUsernameChanged(task.Success,task.ErrorMessage)}}});H5.define("LD50.PlayfabSignin.LoginState",{$kind:"nested enum",statics:{fields:{NONE:0,SIGNED_OUT:1,SIGNED_IN:2,REGISTERING:3,SIGNING_IN:4,ERROR:5}}});H5.define("LD50.Program",{main:function(){var game=new JuiceboxEngine.JuiceboxGame;game.Run(new LD50.MainMenu(game.ResourceManager))}});H5.define("LD50.JuiceUI.JuiceUIButton",{inherits:[LD50.JuiceUI.JuiceUIPanel],fields:{_routine:null},events:{OnPress:null},ctors:{ctor:function(parent){this.$initialize();LD50.JuiceUI.JuiceUIPanel.ctor.call(this,parent);this.InputType=JuiceboxEngine.GUI.UIInput.SELF;this.addOnMouseEnter(H5.fn.cacheBind(this,this.MouseEnter));this.addOnMouseExit(H5.fn.cacheBind(this,this.MouseExit));this.addOnMouseUp(H5.fn.cacheBind(this,this.MouseUp))}},methods:{SetText:function(displayText,big){big===void 0&&(big=!1);var text=new JuiceboxEngine.GUI.Text(this._front);text.ShadowOffset=LD50.JuiceUI.JuiceUIConsts.FONT_SHADOW_OFFSET.$clone();text.DisplayText=displayText;text.Pivot=JuiceboxEngine.GUI.UIDefaults.Centered.$clone();text.Anchor=JuiceboxEngine.GUI.UIDefaults.Centered.$clone();big?(text.Font=this.ResourceManager.Load(JuiceboxEngine.Graphics.Font,LD50.JuiceUI.JuiceUIConsts.FONT_48_PATH),text.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(text.Font.GetWidth(displayText),48)):(text.Font=this.ResourceManager.Load(JuiceboxEngine.Graphics.Font,LD50.JuiceUI.JuiceUIConsts.FONT_32_PATH),text.Dimensions=new JuiceboxEngine.Math.Vector2.$ctor3(text.Font.GetWidth(displayText),32))},MouseUp:function(ev){H5.staticEquals(this.OnPress,null)?null:this.OnPress();this._routine=JuiceboxEngine.Coroutines.CoroutineManager.StartCoroutine(JuiceboxEngine.Coroutines.DefaultRoutines.Linear(.2,H5.fn.bind(this,function(x){this.Height=JuiceboxEngine.Math.JMath.Interpolate(LD50.JuiceUI.JuiceUIConsts.PANEL_OFFSET,0,JuiceboxEngine.Math.Easings.ExponentialEaseOut(x))})));JuiceboxEngine.Coroutines.CoroutineManager.StartCoroutine(this.ClickAnim())},ClickAnim:function(){var $s=0,$jff,$rv,backColor,frontColor,$ae,$en=new H5.GeneratorEnumerator(H5.fn.bind(this,function(){try{for(;;)switch($s){case 0:return backColor=this._back.Color.$clone(),frontColor=this._front.Color.$clone(),this._back.Color=JuiceboxEngine.Math.Color.White.$clone(),this._front.Color=JuiceboxEngine.Math.Color.White.$clone(),$en.current=null,$s=1,!0;case 1:this._back.Color=backColor.$clone();this._front.Color=frontColor.$clone();default:return!1}}catch($ae1){$ae=System.Exception.create($ae1);throw $ae;}}));return $en},MouseEnter:function(ev){this._routine!=null&&JuiceboxEngine.Coroutines.CoroutineManager.StopCoroutine(this._routine);this._routine=JuiceboxEngine.Coroutines.CoroutineManager.StartCoroutine(JuiceboxEngine.Coroutines.DefaultRoutines.Linear(.2,H5.fn.bind(this,function(x){this.Height=JuiceboxEngine.Math.JMath.Interpolate(LD50.JuiceUI.JuiceUIConsts.PANEL_OFFSET,0,JuiceboxEngine.Math.Easings.ExponentialEaseOut(x))})))},MouseExit:function(ev){this._routine!=null&&JuiceboxEngine.Coroutines.CoroutineManager.StopCoroutine(this._routine);this._routine=JuiceboxEngine.Coroutines.CoroutineManager.StartCoroutine(JuiceboxEngine.Coroutines.DefaultRoutines.Linear(.2,H5.fn.bind(this,function(x){this.Height=JuiceboxEngine.Math.JMath.Interpolate(0,LD50.JuiceUI.JuiceUIConsts.PANEL_OFFSET,JuiceboxEngine.Math.Easings.ExponentialEaseOut(x))})))}}})});